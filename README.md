# YouTube Downloader Bot

Telegram-бот для скачивания видео и аудио с YouTube. Позволяет выбрать формат и качество, отправляет файл прямо в чат, а для больших файлов автоматически загружает их на Яндекс.Диск.

**Автор:** Andreas Maier

---

## Возможности

- Скачивание видео с YouTube по ссылке
- Выбор формата: видео (MP4) или аудио (MP3)
- Выбор разрешения для видео (360p, 480p, 720p, 1080p)
- Отправка файла прямо в Telegram-чат (до 50 МБ)
- Автоматическое сохранение больших файлов на Яндекс.Диск со ссылкой в чат
- Whitelist — доступ только для разрешённых пользователей

---

## Требования

- **Python 3.11+**
- **ffmpeg** — необходим для слияния видео- и аудиопотоков (MP4) и конвертации в MP3
- Telegram Bot Token (получить у [@BotFather](https://t.me/BotFather))
- Ваш Telegram User ID (узнать через [@userinfobot](https://t.me/userinfobot))
- Яндекс.Диск (опционально, для файлов крупнее 50 МБ)

> Убедитесь, что `ffmpeg` доступен в `PATH`:
> ```bash
> ffmpeg -version
> ```

---

## Установка

```bash
# 1. Клонировать репозиторий
git clone https://github.com/amaier/youtubeDownloaderBot.git
cd youtubeDownloaderBot

# 2. Создать и активировать виртуальное окружение
python3 -m venv venv
source venv/bin/activate

# 3. Установить зависимости
pip install -r requirements.txt

# 4. Настроить переменные окружения
cp .env.example .env
# Открыть .env и заполнить все значения (см. таблицу ниже)
```

---

## Конфигурация (.env)

| Переменная | Описание |
|---|---|
| `BOT_TOKEN` | Токен Telegram-бота — получить у [@BotFather](https://t.me/BotFather) |
| `ALLOWED_USERS` | Telegram ID разрешённых пользователей через запятую — узнать через [@userinfobot](https://t.me/userinfobot) |
| `YANDEX_DISK_PATH` | Путь к папке на Яндекс.Диске для больших файлов |
| `DOWNLOAD_DIR` | Локальная директория для временных файлов |
| `MAX_TELEGRAM_SIZE` | Максимальный размер файла для отправки через Telegram (в байтах, по умолчанию 52428800) |

---

## Запуск

```bash
python -m bot.main
```

---

## Использование

1. Отправить ссылку на YouTube-видео
2. Бот покажет информацию о видео и предложит выбрать формат: **Видео** или **Аудио**
3. Для видео — выбрать разрешение (360p / 480p / 720p / 1080p)
4. Бот скачает файл и отправит его в чат
5. Если файл крупнее 50 МБ — бот автоматически загрузит его на Яндекс.Диск и пришлёт ссылку

### Команды

| Команда | Описание |
|---|---|
| `/start` | Приветствие и краткая инструкция |
| `/help` | Список команд и описание |

---

## Структура проекта

```
youtubeDownloaderBot/
├── bot/
│   ├── __init__.py
│   ├── main.py          # Точка входа, инициализация бота
│   ├── config.py        # Загрузка конфигурации из .env
│   ├── handlers.py      # Обработчики команд и callback-кнопок
│   └── downloader.py    # Логика скачивания через yt-dlp
├── .env.example         # Пример файла конфигурации
├── requirements.txt     # Зависимости Python
└── README.md
```
